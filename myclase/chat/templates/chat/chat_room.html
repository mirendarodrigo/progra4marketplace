{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="chat-container">
    <h3>Chat con {{ other_user.username }}</h3>

    <div id="chat-messages" class="chat-messages">
        {% for msg in messages %}
            <div class="message {% if msg.sender == request.user %}sent{% else %}received{% endif %}">
                <strong>{{ msg.sender.username }}</strong>: {{ msg.content }}
                <span class="time">{{ msg.timestamp|date:"H:i" }}</span>
            </div>
        {% endfor %}
    </div>

    <form id="chat-form" class="chat-form">
        {% csrf_token %}
        <input type="hidden" name="room_id" value="{{ room.id }}">
        <input type="text" name="content" id="chat-input" placeholder="Escribe un mensaje...">
        <button type="submit">Enviar</button>
    </form>
</div>
{% endblock %}

{% block scripts %}
<script src="{% static 'chat/chat.js' %}"></script>
{% endblock %}
